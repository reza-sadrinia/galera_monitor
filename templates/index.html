<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Galera Cluster Monitor</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.plot.ly/plotly-2.30.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <link href="/static/css/style.css" rel="stylesheet">
</head>

<body>
  <div class="container-fluid py-4">
    <div class="header">
      <h1>Galera Cluster Monitor</h1>
      <div class="refresh-info">
        Auto-refresh: <span id="refresh-countdown">30</span>s
        <button class="btn btn-sm btn-outline-light ms-2" onclick="refreshStatus()">
          Refresh Now
        </button>
        <button class="btn btn-sm btn-outline-warning ms-2" onclick="confirmRestart()">
          Restart HAProxy
        </button>
      </div>
    </div>

    <!-- Tabs -->
    <ul class="nav nav-tabs" id="mainTabs" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link active" id="overview-tab" data-bs-toggle="tab" data-bs-target="#overview-pane" type="button" role="tab" aria-controls="overview-pane" aria-selected="true">Overview</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="charts-tab" data-bs-toggle="tab" data-bs-target="#charts-pane" type="button" role="tab" aria-controls="charts-pane" aria-selected="false">Charts</button>
      </li>
    </ul>

    <div class="tab-content mt-3">
      <div class="tab-pane fade show active" id="overview-pane" role="tabpanel" aria-labelledby="overview-tab">
        <div id="nodes-container" class="node-grid"></div>
      </div>
      <div class="tab-pane fade" id="charts-pane" role="tabpanel" aria-labelledby="charts-tab">
        <div id="charts-container" class="node-grid"></div>
      </div>
    </div>
  </div>

  <script src="/static/js/charts.js"></script>
  <script src="/static/js/main.js"></script>
  <script>
    // Initial load and start countdown
    refreshStatus();
    resetCountdown();
  </script>
</body>

</html>
